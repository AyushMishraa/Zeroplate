<div class="auth-container">
  <!-- Animated Background Particles -->
  <div class="particles-container">
    <div class="particle particle-1"></div>
    <div class="particle particle-2"></div>
    <div class="particle particle-3"></div>
    <div class="particle particle-4"></div>
    <div class="particle particle-5"></div>
    <div class="particle particle-6"></div>
  </div>

  <div class="content-wrapper">
    <div class="card-container">
      <!-- Brand Section -->
      <div class="brand-section">
        <h1 class="brand-title">ZeroPlate</h1>
        <p class="brand-subtitle">Reduce Food Waste, Feed Communities</p>
      </div>

      <mat-card class="shadow-strong">
        <mat-card-content class="form-container">
          <h2 class="form-title">Welcome Back</h2>
          <p class="form-subtitle">Sign in to continue your journey</p>

          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <div class="form-field-wrapper">
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Email</mat-label>
                <input matInput type="email" formControlName="email" placeholder="Enter your email">
                <mat-icon matPrefix>email</mat-icon>
                @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
                  <mat-error>{{ getErrorMessage('email') }}</mat-error>
                }
              </mat-form-field>
            </div>

            <div class="form-field-wrapper">
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Password</mat-label>
                <input 
                  matInput 
                  [type]="hidePassword ? 'password' : 'text'" 
                  formControlName="password" 
                  placeholder="Enter your password">
                <mat-icon matPrefix>lock</mat-icon>
                <button 
                  mat-icon-button 
                  matSuffix 
                  type="button"
                  (click)="togglePasswordVisibility()"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hidePassword">
                  <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
                @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                  <mat-error>{{ getErrorMessage('password') }}</mat-error>
                }
              </mat-form-field>
            </div>

            <button 
              mat-raised-button 
              type="submit"
              class="submit-button"
              [disabled]="isLoading || loginForm.invalid">
              @if (isLoading) {
                <span class="flex items-center justify-center">
                  <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  Signing in...
                </span>
              } @else {
                Sign In
              }
            </button>
          </form>

          <div class="link-section">
            <p>
              Don't have an account?
              <a routerLink="/signup">Sign up</a>
            </p>
          </div>

          <div class="divider">
            <span>Or continue with</span>
          </div>

          <a 
            mat-stroked-button 
            class="google-button"
            href="/api/auth/google">
            <mat-icon>login</mat-icon>
            <span>Google</span>
          </a>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
